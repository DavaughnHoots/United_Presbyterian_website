<div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-8 flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold mb-2" style="color: var(--text-primary);">Daily Content Scheduler</h1>
            <p class="text-gray-600">Schedule spiritual content for each day</p>
        </div>
        <div class="flex gap-2">
            <button id="generateContentBtn" class="btn-secondary">
                <i class="fas fa-magic mr-2"></i>Auto Generate
            </button>
            <button id="bulkOperationsBtn" class="btn-secondary">
                <i class="fas fa-tasks mr-2"></i>Bulk Operations
            </button>
        </div>
    </div>
    
    <!-- Month Navigation -->
    <div class="module-card mb-6">
        <div class="flex justify-between items-center">
            <button id="prevMonth" class="btn btn-sm btn-secondary">
                <i class="fas fa-chevron-left mr-2"></i>Previous
            </button>
            
            <h2 class="text-xl font-semibold">
                <span id="currentMonthYear"></span>
            </h2>
            
            <button id="nextMonth" class="btn btn-sm btn-secondary">
                Next<i class="fas fa-chevron-right ml-2"></i>
            </button>
        </div>
    </div>
    
    <!-- Calendar Grid -->
    <div class="module-card">
        <div class="calendar-grid">
            <!-- Calendar header -->
            <div class="grid grid-cols-7 gap-1 mb-2">
                <div class="text-center font-semibold p-2 text-sm">Sunday</div>
                <div class="text-center font-semibold p-2 text-sm">Monday</div>
                <div class="text-center font-semibold p-2 text-sm">Tuesday</div>
                <div class="text-center font-semibold p-2 text-sm">Wednesday</div>
                <div class="text-center font-semibold p-2 text-sm">Thursday</div>
                <div class="text-center font-semibold p-2 text-sm">Friday</div>
                <div class="text-center font-semibold p-2 text-sm">Saturday</div>
            </div>
            
            <!-- Calendar days will be dynamically generated -->
            <div id="calendarDays" class="grid grid-cols-7 gap-1">
                <!-- Days will be inserted here -->
            </div>
        </div>
    </div>
    
    <!-- Legend -->
    <div class="module-card mt-6">
        <h3 class="text-lg font-semibold mb-3">Content Type Legend</h3>
        <div class="grid grid-cols-3 md:grid-cols-5 gap-3">
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-blue-500 rounded"></div>
                <span class="text-sm">Scripture Reading</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-green-500 rounded"></div>
                <span class="text-sm">Hymn</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-indigo-500 rounded"></div>
                <span class="text-sm">Prayer</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                <span class="text-sm">Guided Prayer</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                <span class="text-sm">Journaling Prompt</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-orange-500 rounded"></div>
                <span class="text-sm">Reflection</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-pink-500 rounded"></div>
                <span class="text-sm">Artwork</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-red-500 rounded"></div>
                <span class="text-sm">Video</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-gray-500 rounded"></div>
                <span class="text-sm">Creed</span>
            </div>
        </div>
    </div>
</div>

<!-- Schedule Content Modal -->
<div id="scheduleModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Schedule Content for <span id="selectedDate"></span></h2>
                    <button onclick="DailyScheduler.closeModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 180px);">
                <!-- Current content for the day -->
                <div id="currentDayContent" class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">Currently Scheduled</h3>
                    <div id="scheduledItems" class="space-y-2">
                        <!-- Scheduled items will be shown here -->
                    </div>
                </div>
                
                <!-- Add new content -->
                <div class="border-t pt-6">
                    <h3 class="text-lg font-semibold mb-3">Add Content</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <% Object.entries(contentTypes).forEach(([key, type]) => { %>
                            <div class="border rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center gap-2">
                                        <i class="fas <%= type.icon %> text-<%= type.color %>-600"></i>
                                        <span class="font-medium"><%= type.name %></span>
                                    </div>
                                    <button class="btn btn-sm btn-primary" onclick="DailyScheduler.selectContent('<%= type.dbType %>')">
                                        <i class="fas fa-plus mr-1"></i>Add
                                    </button>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t flex justify-end space-x-3">
                <button onclick="DailyScheduler.closeModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                    Cancel
                </button>
                <button onclick="DailyScheduler.saveSchedule()" class="btn-primary">
                    <i class="fas fa-save mr-2"></i>Save Schedule
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Content Selection Modal -->
<div id="contentSelectionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Select <span id="contentTypeName"></span></h2>
                    <button onclick="DailyScheduler.closeContentSelection()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Search and filter -->
                <div class="mb-4">
                    <input type="text" id="contentSearch" placeholder="Search content..." 
                           class="w-full px-3 py-2 border rounded-lg">
                </div>
                
                <!-- Content list -->
                <div id="contentList" class="space-y-2 max-h-96 overflow-y-auto">
                    <!-- Content items will be loaded here -->
                </div>
            </div>
            
            <div class="p-6 border-t flex justify-end">
                <button onclick="DailyScheduler.closeContentSelection()" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Auto Generate Modal -->
<div id="generateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg max-w-lg w-full">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Auto Generate Content</h2>
                    <button onclick="DailyScheduler.closeGenerateModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Date Range</label>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="text-xs text-gray-600">Start Date</label>
                            <input type="date" id="generateStartDate" class="w-full px-3 py-2 border rounded-lg">
                        </div>
                        <div>
                            <label class="text-xs text-gray-600">End Date</label>
                            <input type="date" id="generateEndDate" class="w-full px-3 py-2 border rounded-lg">
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Options</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="overwriteExisting" class="mr-2">
                            <span class="text-sm">Overwrite existing content</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="avoidRepeats" class="mr-2" checked>
                            <span class="text-sm">Avoid recent repeats (7 days)</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t flex justify-end space-x-3">
                <button onclick="DailyScheduler.closeGenerateModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                    Cancel
                </button>
                <button onclick="DailyScheduler.generateContent()" class="btn-primary">
                    <i class="fas fa-magic mr-2"></i>Generate
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.calendar-day {
    min-height: 100px;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    padding: 0.5rem;
    cursor: pointer;
    transition: all 0.2s;
}

.calendar-day:hover {
    background-color: #f9fafb;
    border-color: #d1d5db;
}

.calendar-day.other-month {
    background-color: #f9fafb;
    color: #9ca3af;
}

.calendar-day.today {
    background-color: #fef3c7;
    border-color: #fbbf24;
}

.calendar-day.has-content {
    border-color: #60a5fa;
    border-width: 2px;
}

.content-indicator {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
    margin: 1px;
}

.content-type-scripture_reading { background-color: #3b82f6; }
.content-type-hymn { background-color: #10b981; }
.content-type-prayer { background-color: #6366f1; }
.content-type-guided_prayer { background-color: #eab308; }
.content-type-journaling_prompt { background-color: #a855f7; }
.content-type-reflection { background-color: #f97316; }
.content-type-artwork { background-color: #ec4899; }
.content-type-video { background-color: #ef4444; }
.content-type-creed { background-color: #6b7280; }
</style>

<script>
// Pass server data to JavaScript
const serverData = {
    currentMonth: <%= currentMonth %>,
    currentYear: <%= currentYear %>,
    contentByDate: <%- JSON.stringify(contentByDate) %>,
    contentTypes: <%- JSON.stringify(contentTypes) %>
};
</script>

<!-- Load the daily scheduler JavaScript -->
<script src="/js/admin/daily-scheduler.js"></script>